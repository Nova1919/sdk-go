#!/bin/sh
. "$(dirname "$0")/_/husky.sh" 2>/dev/null || true

commit_msg_file="$1"
commit_msg=$(cat "$commit_msg_file")

pattern="^(feat|fix|docs|style|refactor|perf|test|chore|ci):([^\s:]+) .{1,}$"

if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo "‚ùå Invalid commit message format!"
  echo ""
  echo "Expected format: <type>:<scope> <description>"
  echo "Example: refactor:storage remove deprecated code"
  echo ""
  echo "Allowed types: feat | fix | docs | style | refactor | perf | test | chore | ci"
  exit 1
fi
